(()=>{var _=(p,h)=>()=>(h||p((h={exports:{}}).exports,h),h.exports);var I=_(()=>{window.addEventListener("load",()=>{console.log("Physics Canvas Loaded");let p=Matter.Engine,h=Matter.Runner,d=Matter.Bodies,m=Matter.Composite,W=Matter.Mouse,C=Matter.MouseConstraint;Events=Matter.Events;let f=p.create();f.world.gravity.y=1.2,h.run(h.create(),f);let l=f.world,n=document.createElement("canvas");n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.zIndex=9999,n.style.pointerEvents="auto",document.body.appendChild(n);let s=n.getContext("2d");function M(){let t=window.devicePixelRatio||1;n.width=window.innerWidth*t,n.height=window.innerHeight*t,n.style.width=window.innerWidth+"px",n.style.height=window.innerHeight+"px",s.setTransform(t,0,0,t,0,0)}M(),window.addEventListener("resize",M),n.addEventListener("wheel",t=>{window.scrollBy({top:t.deltaY,left:t.deltaX,behavior:"auto"})});let H=d.rectangle(window.innerWidth/2,window.innerHeight+40,window.innerWidth*2,80,{isStatic:!0}),L=d.rectangle(-40,window.innerHeight/2,80,window.innerHeight*2,{isStatic:!0}),B=d.rectangle(window.innerWidth+40,window.innerHeight/2,80,window.innerHeight*2,{isStatic:!0}),S=d.rectangle(window.innerWidth/2,-40,window.innerWidth*2,80,{isStatic:!0});m.add(l,[H,L,B,S]);let a=[];function R(t=200,e=50,i=140,o=40){let r=["#4285f4","#0f9d58","#f4b400","#db4437"],g=r[Math.floor(Math.random()*r.length)],c=d.rectangle(t,e,i,o,{restitution:.5});return c.meta={width:i,height:o,color:g,originalWidth:i,originalHeight:o},m.add(l,c),a.push(c),c}for(let t=0;t<10;t++)R(200+t*160,60);function k(t){let e=t.getBoundingClientRect();t._clickListener&&(t.removeEventListener("click",t._clickListener),t._clickListener=null);let i=["#4285f4","#0f9d58","#f4b400","#db4437"],o=i[Math.floor(Math.random()*i.length)];html2canvas(t).then(r=>{t.parentNode.removeChild(t),t.style.pointerEvents="none";let g=d.rectangle(e.left+e.width/2,e.top+e.height/2,e.width,e.height,{restitution:.5});g.meta={width:e.width,height:e.height,bitmap:r,originalWidth:e.width,originalHeight:e.height},m.add(l,g),a.push(g)})}document.querySelectorAll("#rso > div").forEach(t=>{t.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),k(t)})});function D(t){if(!t.meta||t.meta.width<=t.meta.originalWidth/10)return;let e=t.meta.width/2,i=t.meta.height/2;m.remove(l,t),a=a.filter(o=>o!==t);for(let o=0;o<2;o++){let r=d.rectangle(t.position.x+(o===0?-e/2:e/2),t.position.y,e,i,{restitution:.5});r.meta={width:e,height:i,color:t.meta.color,originalWidth:t.meta.originalWidth,originalHeight:t.meta.originalHeight},Matter.Body.setVelocity(r,{x:(Math.random()-.5)*6,y:-2}),m.add(l,r),a.push(r)}}let x=W.create(n);x.pixelRatio=window.devicePixelRatio||1;let v=C.create(f,{mouse:x,constraint:{stiffness:.25,render:{visible:!1}}});m.add(l,v);let E=!1,u=null,P=20;function X(t,e){return a.some(i=>i.meta?Math.abs(t-i.position.x)<i.meta.width/2&&Math.abs(e-i.position.y)<i.meta.height/2:!1)}document.addEventListener("mousemove",t=>{E||X(t.clientX,t.clientY)?n.style.pointerEvents="auto":n.style.pointerEvents="none"}),document.addEventListener("mousedown",t=>{u={x:t.clientX,y:t.clientY}}),document.addEventListener("mouseup",t=>{if(!u)return;let e=t.clientX-u.x,i=t.clientY-u.y,o=Math.sqrt(e*e+i*i);if(u=null,o>P)return;let r=t.clientX,g=t.clientY,c=null;a.forEach(w=>{w.meta&&Math.abs(r-w.position.x)<w.meta.width/2&&Math.abs(g-w.position.y)<w.meta.height/2&&(c=w)}),c&&(t.stopPropagation(),t.preventDefault(),D(c))}),Events.on(v,"startdrag",()=>{E=!0}),Events.on(v,"enddrag",()=>{E=!1});function Y(){a.forEach(t=>{if(!t.meta)return;(t.meta.width<=t.meta.originalWidth/10||t.meta.height<=t.meta.originalHeight/10)&&m.remove(l,t)}),a=a.filter(t=>l.bodies.includes(t))}(function t(){Y(),s.clearRect(0,0,n.width,n.height),a.forEach(e=>{e.meta&&(s.save(),s.translate(e.position.x,e.position.y),s.rotate(e.angle),e.meta.bitmap?s.drawImage(e.meta.bitmap,-e.meta.width/2,-e.meta.height/2,e.meta.width,e.meta.height):(s.fillStyle=e.meta.color,s.fillRect(-e.meta.width/2,-e.meta.height/2,e.meta.width,e.meta.height)),s.restore())}),requestAnimationFrame(t)})()})});I();})();
